<!DOCTYPE html>
<html>

<head>
  <title> Bootstrap template- Pizza 365 project </title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</head>

<body onload="onLoadPage()">

  <!-- Menu -->
  <div class="container-fluid bg-light">
    <div class="row">
      <div class="col-sm-12">
        <nav class="navbar fixed-top navbar-expand-lg navbar-light bg-light">
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
            aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav nav-fill w-100">
              <li class="nav-item active">
                <a class="nav-link" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#plans">Plans</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#about">About</a>
              </li>
              <li class="nav-item"> <!-- đổi thành dạng click để dễ xử lý-->
                <button class="btn" id="btnOrderDetail" onclick="onNavOrderDetailClick()"> Order Detail</button>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="container" style="padding: 120px 0 50px 0;">
    <div class="row">
      <div class="col-sm-12">
        <div class="row">
          <!-- Title row home -->
          <div class="col-sm-12">
            <h1><b>Pizza 365 Truly italian !</b></h1>
          </div>

          <!-- Slide row home -->
          <div class="col-sm-12">
            <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
              <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="3"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="4"></li>
              </ol>
              <div class="carousel-inner">
                <div class="carousel-item active">
                  <img class="d-block w-100" src="images/mon_y_1.jpg" alt="First slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_2.jpg" alt="Second slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_3.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_4.jpg" alt="Third slide">
                </div>
                <div class="carousel-item">
                  <img class="d-block w-100" src="images/mon_y_5.jpg" alt="Third slide">
                </div>
              </div>
              <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
              </a>
              <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
              </a>
            </div>
          </div>

          <!-- Title what we offer -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Tại sao lại Pizza 365:</b></h2>
          </div>

          <!-- Content what we offer -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-3 p-4 bg-danger border">
                <h3 class="p-2">Ngon</h3>
                <p class="p-2">Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque
                  elementum.</p>
              </div>
              <div class="col-sm-3 p-4 bg-info border">
                <h3 class="p-2">An Toàn</h3>
                <p class="p-2">Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque
                  elementum.</p>
              </div>
              <div class="col-sm-3 p-4 bg-success text-white border">
                <h3 class="p-2">Sạch sẽ</h3>
                <p class="p-2">Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque
                  elementum.</p>
              </div>
              <div class="col-sm-3 p-4 bg-warning text-white border">
                <h3 class="p-2">Giá rẻ</h3>
                <p class="p-2">Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque
                  elementum.</p>
              </div>
            </div>
          </div>
        </div>

        <div id="plans" class="row">
          <!-- Title what we offer -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-1 border-bottom">Menu Combo Pizza 365</b></h2>
            <p><span class="p-2">Hãy chọn cỡ pizza phù hợp với bạn!</span></p>
          </div>
          <!-- Content what we offer -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-dark text-white text-center">
                    <h3>S (small)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item"><b>Đường kính: </b> 20cm</li>
                      <li class="list-group-item"><b>Sườn nướng: </b> 2</li>
                      <li class="list-group-item"><b>Salad:</b> 200g</li>
                      <li class="list-group-item"><b>Nước ngọt: </b> 2</li>
                      <li class="list-group-item">
                        <h1><b>Giá</b></h1> 150.000VND
                      </li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button onclick="onBtnSmallClick()" id="btn-small" class="btn btn-success"
                      data-is-selected-menu="N">Chọn</button>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-secondary text-white text-center">
                    <h3>M (medium)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item"><b>Đường kính: </b> 25cm</li>
                      <li class="list-group-item"><b>Sườn nướng: </b> 4</li>
                      <li class="list-group-item"><b>Salad:</b> 300g</li>
                      <li class="list-group-item"><b>Nước ngọt: </b> 3</li>
                      <li class="list-group-item">
                        <h1><b>Giá</b></h1> 200.000VND
                      </li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button onclick="onBtnMediumClick()" id="btn-medium" class="btn btn-success"
                      data-is-selected-menu="N">Chọn</button>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card">
                  <div class="card-header bg-dark text-white text-center">
                    <h3>L (large)</h3>
                  </div>
                  <div class="card-body text-center">
                    <ul class="list-group list-group-flush">
                      <li class="list-group-item"><b>Đường kính: </b> 30cm</li>
                      <li class="list-group-item"><b>Sườn nướng: </b> 8</li>
                      <li class="list-group-item"><b>Salad:</b> 500g</li>
                      <li class="list-group-item"><b>Nước ngọt: </b> 4</li>
                      <li class="list-group-item">
                        <h1><b>Giá</b></h1> 250.000VNG
                      </li>
                    </ul>
                  </div>
                  <div class="card-footer text-center">
                    <button onclick="onBtnLargeClick()" id="btn-large" class="btn btn-success"
                      data-is-selected-menu="N">Chọn</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div id="about" class="row">
          <!-- Title Who We Are -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Chọn loại Pizza</b></h2>
          </div>

          <!-- Content Who We Are -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-4">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_1.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Gà</h3>
                    <p>Pizza Gà</p>
                    <p>Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
                    </p>
                    <p><button onclick="onBtnPizzaGaClick()" id="btn-pizza-ga" class="btn btn-info w-100"
                        data-is-selected-pizza="N">Chọn</button></p>
                  </div>
                </div>
              </div>
              <div class="col-sm-4">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_2.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Hải sản</h3>
                    <p>Pizza Hải Sản</p>
                    <p>Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
                    </p>
                    <p><button onclick="onBtnPizzaHaiSanClick()" id="btn-pizza-hai-san" class="btn btn-info w-100"
                        data-is-selected-pizza="N">Chọn</button></p>
                  </div>
                </div>
              </div>
              <div class="col-sm-4 form-group">
                <div class="card w-100" style="width: 18rem;">
                  <img src="images/pizza_type_3.jpg" class="card-img-top">
                  <div class="card-body">
                    <h3>Thịt nướng</h3>
                    <p>Pizza Thịt Nướng</p>
                    <p>Phasellus eget enim eu lectus faucibus vestibulum. Suspendisse sodales pellentesque elementum.
                    </p>
                    <p><button onclick="onBtnPizzaThitNuongClick()" id="btn-pizza-thit-nuong" class="btn btn-info w-100"
                        data-is-selected-pizza="N">Chọn</button></p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 text-center form-group">
            <h1 for="">Hãy chọn đồ uống bạn yêu thích</h1>
          </div>
          <div class="col-sm-12 text-center">
            <select class="w-100 border form-control" id="select-drinks">
              <option value="0">Chọn đồ uống</option>
            </select>
          </div>

        </div>

        <div id="contact" class="row">
          <!-- Title Contact Us -->
          <div class="col-sm-12 text-center p-4 mt-4">
            <h2><b class="p-2 border-bottom">Thông tin</b></h2>
          </div>

          <!-- Content Contact Us -->
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-12">
                <div class="form-group">
                  <label for="fullname">Họ và tên</label>
                  <input type="text" class="form-control" id="inp-fullname" placeholder="Họ và tên">
                </div>
                <div class="form-group">
                  <label for="email">Email</label>
                  <input type="text" class="form-control" id="inp-email" placeholder="Email">
                </div>
                <div class="form-group">
                  <label for="dien-thoai">Điện thoại</label>
                  <input type="text" class="form-control" id="inp-dien-thoai" placeholder="Điện thoại">
                </div>
                <div class="form-group">
                  <label for="dia-chi">Địa chỉ</label>
                  <input type="text" class="form-control" id="inp-dia-chi" placeholder="Địa chỉ">
                </div>
                <div class="form-group">
                  <label for="message">Lời nhắn</label>
                  <input type="text" class="form-control" id="inp-message" placeholder="Lời nhắn">
                </div>
                <div class="form-group">
                  <label for="message">Mã giảm giá</label>
                  <input type="text" class="form-control" id="inp-voucher-id" placeholder="mã giảm giá">
                </div>
                <button onclick="onBtnKiemTraDon()" type="button" class="btn btn-dark w-100">Kiểm Tra Đơn</button>
              </div>
            </div>
          </div>
          <!-- vùng hiển thị thông tin đơn hàng(order) -->
          <div id="div-container-order" class="container bg-info p-2 jumbotron" style="display: none">
            <div id="div-order-infor" class="text-white p-3">...</div>
            <div class="p-2">
              <button type="button" class="btn btn-warning w-100" onclick="onBtnGuiDonClick()">
                Gửi đơn
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div class="container-fluid bg-light p-5">
    <div class="row text-center">
      <div class="col-sm-12">
        <h4 class="m-2">Footer</h4>
        <a href="#" class="btn btn-dark m-3"><i class="fa fa-arrow-up"></i>To the top</a>
        <div class="m-2">
          <i class="fa fa-facebook-official w3-hover-opacity"></i>
          <i class="fa fa-instagram w3-hover-opacity"></i>
          <i class="fa fa-snapchat w3-hover-opacity"></i>
          <i class="fa fa-pinterest-p w3-hover-opacity"></i>
          <i class="fa fa-twitter w3-hover-opacity"></i>
          <i class="fa fa-linkedin w3-hover-opacity"></i>
        </div>
      </div>
    </div>
  </div>
</body>

<script>
  "use strict";
  /*** REGION 1 - Global variables - Vùng khai báo biến, hằng số, tham số TOÀN CỤC */
  const gREQUEST_STATUS_OK = 200;
  const gREQUEST_READY_STATUS_FINISH_AND_OK = 4;
  const gREQUEST_CREATE_SUCCESS = 201;
  const gBASE_URL_DRINKS = "http://203.171.20.210:8080/devcamp-pizza365/drinks";
  const gBASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/orders";
  /*** REGION 2 - Vùng gán / thực thi hàm xử lý sự kiện cho các elements */
  function onNavOrderDetailClick() {
    var vBtnDetail = document.getElementById("btnOrderDetail")
    var vId = vBtnDetail.dataset.id;
    var vOrderCode = vBtnDetail.dataset.ordercode;
    console.log(vOrderCode);
    const vDETAIL_FORM_URL = "viewOrder.html";
    var vUrlSiteToOpen = vDETAIL_FORM_URL + "?" +
      "id=" + vId +
      "&orderCode=" + vOrderCode;
    window.location = vUrlSiteToOpen;
  }
  function onLoadPage() {
    var vXhttp = new XMLHttpRequest();
    callApiDrinkList(vXhttp)
    vXhttp.onreadystatechange =
      function () {
        if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_STATUS_OK) {
          loadDataToSelect(vXhttp)
        }
      };
  }
  function onBtnSmallClick() {
    changeBtnColor("Small");
    var vSelectMenu = getMenuPizza("Small", "20cm", 2, "200g", 2, "150.000VND");
    vSelectMenu.displayInConsole();
  }
  function onBtnMediumClick() {
    changeBtnColor("Medium");
    var vSelectMenu = getMenuPizza("Medium", "25cm", 4, "300g", 3, "200.000VND");
    vSelectMenu.displayInConsole();
  }
  function onBtnLargeClick() {
    changeBtnColor("Large");
    var vSelectMenu = getMenuPizza("Large", "30cm", 8, "500g", 4, "250.000VND");
    vSelectMenu.displayInConsole();
  }

  /*** REGION 3 - Event handlers - Vùng khai báo các hàm xử lý sự kiện */
  function changeBtnColor(paramPizza) {
    var vBtnSmall = document.getElementById("btn-small");
    var vBtnMedium = document.getElementById("btn-medium");
    var vBtnLarge = document.getElementById("btn-large");

    if (paramPizza === "Small") {
      vBtnSmall.className = "btn btn-warning";
      vBtnSmall.setAttribute("data-is-selected-menu", "Y")
      vBtnMedium.className = "btn btn-success";
      vBtnMedium.setAttribute("data-is-selected-menu", "N")
      vBtnLarge.className = "btn btn-success";
      vBtnLarge.setAttribute("data-is-selected-menu", "N")
    } else if (paramPizza === "Medium") {
      console.log("chọn menucombo cỡ medium:");
      vBtnSmall.className = "btn btn-success";
      vBtnSmall.setAttribute("data-is-selected-menu", "N")
      vBtnMedium.className = "btn btn-warning";
      vBtnMedium.setAttribute("data-is-selected-menu", "Y")
      vBtnLarge.className = "btn btn-success";
      vBtnLarge.setAttribute("data-is-selected-menu", "N")
    } else if (paramPizza === "Large") {
      vBtnSmall.className = "btn btn-success";
      vBtnSmall.setAttribute("data-is-selected-menu", "N")
      vBtnMedium.className = "btn btn-success";
      vBtnMedium.setAttribute("data-is-selected-menu", "N")
      vBtnLarge.className = "btn btn-warning";
      vBtnLarge.setAttribute("data-is-selected-menu", "Y")
    }
  }

  function onBtnPizzaGaClick() {
    changeBtnPizzaColor("PizzaGa");
    var vPizza = getPizza("Pizza gà");
    vPizza.displayInConsole();
  }
  function onBtnPizzaHaiSanClick() {
    changeBtnPizzaColor("PizzaHaiSan");
    var vPizza = getPizza("Pizza hải sản");
    vPizza.displayInConsole();
  }
  function onBtnPizzaThitNuongClick() {
    changeBtnPizzaColor("PizzaThitNuong");
    var vPizza = getPizza("Pizza thịt nướng");
    vPizza.displayInConsole();
  }
  function changeBtnPizzaColor(paramPizza) {
    var vBtnPizzaGa = document.getElementById("btn-pizza-ga");
    var vBtnPizzaHaiHan = document.getElementById("btn-pizza-hai-san");
    var vBtnPizzaThitNuong = document.getElementById("btn-pizza-thit-nuong");

    if (paramPizza === "PizzaGa") {
      vBtnPizzaGa.className = "btn btn-warning w-100";
      vBtnPizzaGa.setAttribute("data-is-selected-pizza", "Y");
      vBtnPizzaHaiHan.className = "btn btn-info w-100";
      vBtnPizzaHaiHan.setAttribute("data-is-selected-pizza", "N");
      vBtnPizzaThitNuong.className = "btn btn-info w-100";
      vBtnPizzaThitNuong.setAttribute("data-is-selected-pizza", "N");
    }
    else if (paramPizza === "PizzaHaiSan") {
      vBtnPizzaGa.className = "btn btn-info w-100";
      vBtnPizzaGa.setAttribute("data-is-selected-pizza", "N");
      vBtnPizzaHaiHan.className = "btn btn-warning w-100";
      vBtnPizzaHaiHan.setAttribute("data-is-selected-pizza", "Y");
      vBtnPizzaThitNuong.className = "btn btn-info w-100";
      vBtnPizzaThitNuong.setAttribute("data-is-selected-pizza", "N");
    }
    else if (paramPizza === "PizzaThitNuong") {
      vBtnPizzaGa.className = "btn btn-info w-100";
      vBtnPizzaGa.setAttribute("data-is-selected-pizza", "N");
      vBtnPizzaHaiHan.className = "btn btn-info w-100";
      vBtnPizzaHaiHan.setAttribute("data-is-selected-pizza", "N");
      vBtnPizzaThitNuong.className = "btn btn-warning w-100";
      vBtnPizzaThitNuong.setAttribute("data-is-selected-pizza", "Y");
    }
  }
  function onBtnKiemTraDon() {
    var vOrderInfo = {
      menuDuocChon: "",
      loaiPizza: "",
      loaiNuocUong: "",
      hoVaTen: "",
      email: "",
      dienThoai: "",
      diaChi: "",
      loiNhan: "",
      voucher: "",
      phanTramGiamGia: 0,
      priceAnnualVND: function () {

        var vTotal = parseInt(this.menuDuocChon.price) * (1 - parseInt(this.phanTramGiamGia) / 100);
        return vTotal;

      }
    }

    // console.log(vOrderInfo);
    getDataOder(vOrderInfo);
    console.log(vOrderInfo);
    var vKetQuaKiemTra = validateDataOrder(vOrderInfo);
    if (vKetQuaKiemTra == true) {
      showOrderInfor(vOrderInfo);
    }
  }

  function onBtnGuiDonClick() {
    var vOrderInfo = {
      menuDuocChon: "",
      loaiPizza: "",
      loaiNuocUong: "",
      hoVaTen: "",
      email: "",
      dienThoai: "",
      diaChi: "",
      loiNhan: "",
      voucher: "",
      phanTramGiamGia: 0,
      priceAnnualVND: function () {

        var vTotal = parseInt(this.menuDuocChon.price) * (1 - parseInt(this.phanTramGiamGia) / 100);
        return vTotal;

      }
    }

    // console.log(vOrderInfo);
    getDataOder(vOrderInfo);
    // console.log(vOrderInfo);
    

    var vObjectRequest = {
      kichCo: "",
      duongKinh: "",
      suon: "",
      salad: "'",
      loaiPizza: "",
      idVourcher: "",
      idLoaiNuocUong: "",
      soLuongNuoc: "",
      hoTen: "",
      thanhTien: "",
      email: "",
      soDienThoai: "",
      diaChi: "",
      loiNhan: "",
    }
    vObjectRequest.kichCo = vOrderInfo.menuDuocChon.comboPizza;
    vObjectRequest.duongKinh = vOrderInfo.menuDuocChon.duongKinh;
    vObjectRequest.suon = vOrderInfo.menuDuocChon.suonNuong;
    vObjectRequest.salad = vOrderInfo.menuDuocChon.salad;
    vObjectRequest.loaiPizza = vOrderInfo.loaiPizza;
    vObjectRequest.idLoaiNuocUong = vOrderInfo.loaiNuocUong;
    vObjectRequest.soLuongNuoc = vOrderInfo.menuDuocChon.nuocNgot;
    vObjectRequest.idVourcher = vOrderInfo.voucher;
    vObjectRequest.hoTen = vOrderInfo.hoVaTen;
    vObjectRequest.soDienThoai = vOrderInfo.dienThoai;
    vObjectRequest.thanhTien = vOrderInfo.menuDuocChon.price;
    vObjectRequest.email = vOrderInfo.email;
    vObjectRequest.diaChi = vOrderInfo.diaChi;
    vObjectRequest.loiNhan = vOrderInfo.loiNhan;

    // getDataOder(vObjectRequest);
    console.log(vObjectRequest);
    var vKetQuaKiemTra = validateObjDataOrder(vObjectRequest);
    if (vKetQuaKiemTra == true) {
      var vXmlHttpCreateOrder = new XMLHttpRequest();
      callApiCreateOrder(vObjectRequest, vXmlHttpCreateOrder);
      vXmlHttpCreateOrder.onreadystatechange =
        function () {
          if (this.readyState == gREQUEST_READY_STATUS_FINISH_AND_OK && this.status == gREQUEST_CREATE_SUCCESS) { // status 201 tao thanh cong
            var vCreatedOrder = JSON.parse(vXmlHttpCreateOrder.responseText);
            var vBtnOrderDetail = document.getElementById("btnOrderDetail");
            vBtnOrderDetail.setAttribute("data-id", vCreatedOrder.id);
            vBtnOrderDetail.setAttribute("data-orderCode", vCreatedOrder.orderCode)
          }
        }

    }

  }

  /*** REGION 4 - Common funtions - Vùng khai báo hàm dùng chung trong toàn bộ chương trình*/
  function getMenuPizza(paramComboPizza, paramDK, paramSN, paramSalad, paramDrink, paramVND) {
    var comboPizza = {
      comboPizza: paramComboPizza,
      duongKinh: paramDK,
      suonNuong: paramSN,
      salad: paramSalad,
      nuocNgot: paramDrink,
      price: paramVND,
      // in ra console
      displayInConsole() {
        console.log("loan combo: " + this.comboPizza);
        console.log("duong kinh: " + this.duongKinh);
        console.log("suon nuong: " + this.suonNuong);
        console.log("salad: " + this.salad);
        console.log("nuoc ngot: " + this.nuocNgot);
        console.log("price: " + this.price);
      }
    }
    return comboPizza;
  }
  function getPizza(paramPizza) {
    var vPizza = {
      tenPizza: paramPizza,
      displayInConsole(vPizza) {
        console.log("Ten pizza: " + this.tenPizza);

      }
    }
    return vPizza
  }
  function callApiDrinkList(paramXmlHttp) {
    paramXmlHttp.open("GET", gBASE_URL_DRINKS, true);
    paramXmlHttp.send();
  }
  function loadDataToSelect(paramXmlHttp) {
    var vDataDrinks = JSON.parse(paramXmlHttp.responseText);
    var vSelectDinks = document.getElementById("select-drinks");

    for (var bI = 0; bI < vDataDrinks.length; bI++) {
      var vSelectOpt = document.createElement("option");
      vSelectOpt.value = vDataDrinks[bI].maNuocUong;
      vSelectOpt.text = vDataDrinks[bI].tenNuocUong;
      vSelectDinks.appendChild(vSelectOpt)
    }
  }
  function getDataOder(paramOderObj) {
    var vBtnBasic = document.getElementById("btn-small");
    var vMenuBasicDaChon = vBtnBasic.getAttribute("data-is-selected-menu");
    var vBtnMedium = document.getElementById("btn-medium");
    var vMenuMediumDaChon = vBtnMedium.getAttribute("data-is-selected-menu");
    var vBtnLarge = document.getElementById("btn-large");
    var vMenuLargeDaChon = vBtnLarge.getAttribute("data-is-selected-menu");

    var vSelectedMenu = getMenuPizza("", 0, 0, 0, 0, 0);
    if (vMenuBasicDaChon === "Y") {
      vSelectedMenu = getMenuPizza("S", 20, 2, 200, 2, 150000);
    }
    else if (vMenuMediumDaChon === "Y") {
      vSelectedMenu = getMenuPizza("M", 25, 4, 300, 3, 200000);
    }
    else if (vMenuLargeDaChon === "Y") {
      vSelectedMenu = getMenuPizza("L", 30, 8, 500, 4, 250000);
    }

    var vBtnGa = document.getElementById("btn-pizza-ga");
    var vPizzaGaDaChon = vBtnGa.getAttribute("data-is-selected-pizza");
    var vBtnHaiSan = document.getElementById("btn-pizza-hai-san");
    var vPizzaHaiSanDaChon = vBtnHaiSan.getAttribute("data-is-selected-pizza");
    var vBtnThitNuong = document.getElementById("btn-pizza-thit-nuong");
    var vPizzaThitNuongDaChon = vBtnThitNuong.getAttribute("data-is-selected-pizza");
    var vLoaiPizza = "";
    if (vPizzaGaDaChon === "Y") {
      vLoaiPizza = "Ga";
    }
    else if (vPizzaHaiSanDaChon === "Y") {
      vLoaiPizza = "HaiSan";
    }
    else if (vPizzaThitNuongDaChon === "Y") {
      vLoaiPizza = "ThitNuong";
    }

    var vDrink = document.getElementById("select-drinks");
    var vDrinkValue = vDrink.options[vDrink.selectedIndex].value;

    var vElementInputName = document.getElementById("inp-fullname");
    var vValueInputName = vElementInputName.value;

    var vElementInputEmail = document.getElementById("inp-email");
    var vValueInputEmail = vElementInputEmail.value;

    var vElementInputPhone = document.getElementById("inp-dien-thoai");
    var vValueInputPhone = vElementInputPhone.value;

    var vElementInputAddress = document.getElementById("inp-dia-chi");
    var vValueInputAddress = vElementInputAddress.value;

    var vElementInputMessage = document.getElementById("inp-message");
    var vValueInputMessage = vElementInputMessage.value;

    var vElementInputVoucherID = document.getElementById("inp-voucher-id");
    var vValueInputVoucherID = vElementInputVoucherID.value;
    if (vValueInputVoucherID != "") {
      var vGetVoucher = getVoucherById(vValueInputVoucherID, paramOderObj)

    }

    paramOderObj.menuDuocChon = vSelectedMenu;
    paramOderObj.loaiPizza = vLoaiPizza;
    paramOderObj.loaiNuocUong = vDrinkValue;
    paramOderObj.hoVaTen = vValueInputName;
    paramOderObj.email = vValueInputEmail;
    paramOderObj.dienThoai = vValueInputPhone;
    paramOderObj.diaChi = vValueInputAddress;
    paramOderObj.loiNhan = vValueInputMessage;
    paramOderObj.voucher = vValueInputVoucherID

  }
  function validateDataOrder(paramOderObj) {
    if (paramOderObj.menuDuocChon.comboPizza === "") {
      alert("Chọn combo pizza...");
      return false;
    }
    if (paramOderObj.loaiPizza === "") {
      alert("Chọn loại pizza...");
      return false;
    }
    if (paramOderObj.loaiNuocUong === "0") {
      alert("Chọn loại đồ uống...");
      return false;
    }
    if (paramOderObj.hoVaTen === "") {
      alert("Nhập họ và tên");
      return false;
    }
    if (isEmail(paramOderObj.email) == false) {
      return false;
    }
    if (paramOderObj.dienThoai === "") {
      alert("Nhập vào số điện thoại...");
      return false;
    }
    if (paramOderObj.diaChi === "") {
      alert("Địa chỉ không để trống...");
      return false;
    }

    return true;
  }
  function isEmail(paramEmail) {
    if (paramEmail < 3) {
      alert("Nhập email...");
      return false;
    }
    if (paramEmail.indexOf("@") === -1) {
      alert("Email phải có ký tự @");
      return false;
    }
    if (paramEmail.startsWith("@") === true) {
      alert("Email không bắt đầu bằng @");
      return false;
    }
    if (paramEmail.endsWith("@") === true) {
      alert("Email kết thúc bằng @");
      return false;
    }
    return true;
  }

  function getVoucherById(paramVoucherID, paramOderObj) {
    const vBASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/voucher_detail";
    var vXmlHttp = new XMLHttpRequest();
    vXmlHttp.open("GET", vBASE_URL + "/" + paramVoucherID, false);
    vXmlHttp.send();

    if (vXmlHttp.status == gREQUEST_STATUS_OK) {
      var vGetVoucherObj = JSON.parse(vXmlHttp.responseText);
      // console.log(vGetVoucherObj);
      paramOderObj.voucher = vGetVoucherObj.maVoucher;
      paramOderObj.phanTramGiamGia = parseInt(vGetVoucherObj.phanTramGiamGia);

    } else {
      alert("Khong co voucher " + paramVoucherID)
    }
  }

  function showOrderInfor(paramOrder, paramObjRequest) {
    var vDivContainer = document.getElementById("div-container-order");
    var vDivOrderInfo = document.getElementById("div-order-infor");
    vDivContainer.style.display = "block";
    vDivOrderInfo.innerHTML = "Họ và tên: " + paramOrder.hoVaTen + "<br>";
    vDivOrderInfo.innerHTML += "Email: " + paramOrder.email + "<br>";
    vDivOrderInfo.innerHTML += "Địa chỉ: " + paramOrder.diaChi + "<br>";
    vDivOrderInfo.innerHTML += "Lời nhắn: " + paramOrder.loiNhan + "<br>";
    vDivOrderInfo.innerHTML += "....................................." + "<br>";
    vDivOrderInfo.innerHTML += "Kích cỡ: " + paramOrder.menuDuocChon.comboPizza + "<br>";
    vDivOrderInfo.innerHTML += "Đường kính: " + paramOrder.menuDuocChon.duongKinh + "<br>";
    vDivOrderInfo.innerHTML += "Sườn nướng: " + paramOrder.menuDuocChon.suonNuong + "<br>";
    vDivOrderInfo.innerHTML += "Salad : " + paramOrder.menuDuocChon.salad + "<br>";
    vDivOrderInfo.innerHTML += "Nước Ngọt : " + paramOrder.menuDuocChon.nuocNgot + "<br>";
    vDivOrderInfo.innerHTML += "....................................." + "<br>";

    vDivOrderInfo.innerHTML += "Loại đồ uống : " + paramOrder.loaiNuocUong + "<br>";
    vDivOrderInfo.innerHTML += "Loại pizza : " + paramOrder.loaiPizza + "<br>";
    vDivOrderInfo.innerHTML += "Mã voucher : " + paramOrder.voucher + "<br>";
    vDivOrderInfo.innerHTML += "Giá vnd : " + paramOrder.menuDuocChon.price + "<br>";
    vDivOrderInfo.innerHTML += "Discount %: " + paramOrder.phanTramGiamGia + "<br>";
    vDivOrderInfo.innerHTML += "Phải thanh toán vnd: " + paramOrder.priceAnnualVND();


  }

   
  // function getObjDataOder(paramOrderObj) {
  //   var vBtnBasic = document.getElementById("btn-small");
  //   var vMenuBasicDaChon = vBtnBasic.getAttribute("data-is-selected-menu");
  //   var vBtnMedium = document.getElementById("btn-medium");
  //   var vMenuMediumDaChon = vBtnMedium.getAttribute("data-is-selected-menu");
  //   var vBtnLarge = document.getElementById("btn-large");
  //   var vMenuLargeDaChon = vBtnLarge.getAttribute("data-is-selected-menu");

  //   var vSelectedMenu = getMenuPizza("", 0, 0, 0, 0, 0);
  //   if (vMenuBasicDaChon === "Y") {
  //     vSelectedMenu = getMenuPizza("S", 20, 2, 200, 2, 150000);
  //   }
  //   else if (vMenuMediumDaChon === "Y") {
  //     vSelectedMenu = getMenuPizza("M", 25, 4, 300, 3, 200000);
  //   }
  //   else if (vMenuLargeDaChon === "Y") {
  //     vSelectedMenu = getMenuPizza("L", 30, 8, 500, 4, 250000);
  //   }

  //   var vBtnGa = document.getElementById("btn-pizza-ga");
  //   var vPizzaGaDaChon = vBtnGa.getAttribute("data-is-selected-pizza");
  //   var vBtnHaiSan = document.getElementById("btn-pizza-hai-san");
  //   var vPizzaHaiSanDaChon = vBtnHaiSan.getAttribute("data-is-selected-pizza");
  //   var vBtnThitNuong = document.getElementById("btn-pizza-thit-nuong");
  //   var vPizzaThitNuongDaChon = vBtnThitNuong.getAttribute("data-is-selected-pizza");
  //   var vLoaiPizza = "";
  //   if (vPizzaGaDaChon === "Y") {
  //     vLoaiPizza = "Ga";
  //   }
  //   else if (vPizzaHaiSanDaChon === "Y") {
  //     vLoaiPizza = "HaiSan";
  //   }
  //   else if (vPizzaThitNuongDaChon === "Y") {
  //     vLoaiPizza = "ThitNuong";
  //   }

  //   var vDrink = document.getElementById("select-drinks");
  //   var vDrinkValue = vDrink.options[vDrink.selectedIndex].value;

  //   var vElementInputName = document.getElementById("inp-fullname");
  //   var vValueInputName = vElementInputName.value;

  //   var vElementInputEmail = document.getElementById("inp-email");
  //   var vValueInputEmail = vElementInputEmail.value;

  //   var vElementInputPhone = document.getElementById("inp-dien-thoai");
  //   var vValueInputPhone = vElementInputPhone.value;

  //   var vElementInputAddress = document.getElementById("inp-dia-chi");
  //   var vValueInputAddress = vElementInputAddress.value;

  //   var vElementInputMessage = document.getElementById("inp-message");
  //   var vValueInputMessage = vElementInputMessage.value;

  //   var vElementInputVoucherID = document.getElementById("inp-voucher-id");
  //   var vValueInputVoucherID = vElementInputVoucherID.value;
  //   if (vValueInputVoucherID != "") {
  //     kiemTraVoucher(vValueInputVoucherID, paramOrderObj)
  //   }

  //   paramOrderObj.kichCo = vSelectedMenu.comboPizza;
  //   paramOrderObj.duongKinh = vSelectedMenu.duongKinh;
  //   paramOrderObj.salad = vSelectedMenu.salad;
  //   paramOrderObj.soLuongNuoc = vSelectedMenu.nuocNgot;
  //   paramOrderObj.suon = vSelectedMenu.suonNuong;
  //   paramOrderObj.loaiPizza = vLoaiPizza;
  //   paramOrderObj.idLoaiNuocUong = vDrinkValue;
  //   paramOrderObj.hoTen = vValueInputName;
  //   paramOrderObj.email = vValueInputEmail;
  //   paramOrderObj.soDienThoai = vValueInputPhone;
  //   paramOrderObj.diaChi = vValueInputAddress;
  //   paramOrderObj.loiNhan = vValueInputMessage;
  //   paramOrderObj.thanhTien = vSelectedMenu.price;
  //   paramOrderObj.idVourcher = vValueInputVoucherID

  // }


  function kiemTraVoucher(paramVoucher, paramOrderObj) {
    var vXmlHttp = new XMLHttpRequest();
    var vGetVoucher = voucherById(paramVoucher, vXmlHttp)
    vXmlHttp.onreadystatechange = function () {
      if (vXmlHttp.status == gREQUEST_STATUS_OK) {
        var vGetVoucherObj = JSON.parse(vXmlHttp.responseText);
        paramOrderObj.idVourcher = vGetVoucherObj.idVourcher;
      } else {
        alert("Khong co voucher " + paramVoucherID)
      }
    }
  }
  function voucherById(paramVoucherID, vXmlHttp) {
    const vBASE_URL = "http://203.171.20.210:8080/devcamp-pizza365/voucher_detail";

    vXmlHttp.open("GET", vBASE_URL + "/" + paramVoucherID, false);
    vXmlHttp.send();
  }


  function validateObjDataOrder(paramOderObj) {
    if (paramOderObj.kichCo === "") {
      alert("Chọn combo pizza...");
      return false;
    }
    if (paramOderObj.loaiPizza === "") {
      alert("Chọn loại pizza...");
      return false;
    }
    if (paramOderObj.idLoaiNuocUong === "0") {
      alert("Chọn loại đồ uống...");
      return false;
    }
    if (paramOderObj.hoTen === "") {
      alert("Nhập họ và tên");
      return false;
    }
    if (isEmail(paramOderObj.email) == false) {
      return false;
    }
    if (paramOderObj.soDienThoai === "") {
      alert("Nhập vào số điện thoại...");
      return false;
    }
    if (paramOderObj.diaChi === "") {
      alert("Địa chỉ không để trống...");
      return false;
    }

    return true;
  }
  function callApiCreateOrder(paramObjRequest, paramXmlHttp) {
    paramXmlHttp.open("POST", gBASE_URL, true);
    paramXmlHttp.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
    paramXmlHttp.send(JSON.stringify(paramObjRequest));
  }


</script>

</html>